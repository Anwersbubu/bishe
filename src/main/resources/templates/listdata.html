<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>房源信息显示页</title>
    <link href="../static/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../static/layui/css/layui.css" media="all" rel="stylesheet">
    <link href="../static/css/bannercss.css" rel="stylesheet">
    <link href="../static/css/details.css" rel="stylesheet">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_848666_pri5cwk3xde.css"/>
    <script src="../static/js/jquery.min.js" type="text/javascript"></script>
    <script charset="utf-8" src="../static/layui/layui.all.js" type="text/javascript"></script>
    <script src="../static/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="https://webapi.amap.com/maps?v=1.4.15&key=36a678df773856fff019cc42ebfc80c0"
            type="text/javascript"></script>
    <script>
        let lid = location.search.substr(5, 1);
        function djs() {
            alert("3秒后，自动跳转到上一页！");
            let num = "<p><em id=\"num\">3</em>秒后，自动跳转到上一页</p>";
            $.innerHTML = num;
            let i = 3;
            document.getElementById("num").innerText=i--;
            if (i == 0) {
                window.history.back();
            }
            setTimeout("djs()", 1000);
        }
        var date;
        if (!lid > 0) {
            djs();
        }else{
            $.ajax({
                url:"/homedata",
                data:{"lid":lid},
                async:false,//异步改为同步，为了改变全局变量
                type:"post",
                success:function (ret){
                    if (ret.success){
                        // housename = ret.data.list.lname;
                        // housedesc = ret.data.list.ldesc;
                        // houseprice = ret.data.list.lprice;
                        // console.log(housename+"--"+housedesc+"--"+houseprice);
                        date = ret.data.list;
                    }else {
                        djs();
                    }
                }
            });
        }
    </script>
</head>
<body>
<header id="header"></header>
<div class="details-head">
    <!-- title -->
    <div class="title-wrapper">
        <div class="left-con">
            <h2 class="house-title">房屋名称</h2>
            <p class="tags">
                <span>房屋描述</span>
            </p>
        </div>
    </div>
</div>
<section class="layui-container wrapper">
    <p class="breadcrumb">
        <span class="layui-breadcrumb" lay-separator=">">
            <a href="#">首页</a>
            <a href="#">房屋详情</a>
        </span>
    </p>
    <div class="carousel-image layui-pull-left layui-col-md7">
        <div class="layui-carousel" id="details-image" lay-anim="default" lay-indicator="inside" lay-arrow="hover" style="width: 100%; height: 400px;">
            <div carousel-item style="float: left;" class="bbackdiv">
<!--                <div style="background: url('#')no-repeat center/cover"></div>-->
            </div>
            <div class="layui-carousel-ind">
                <ul>
<!--                    <li class="layui-this"></li>-->
                </ul>
            </div>
            <button class="layui-icon layui-carousel-arrow" lay-type="sub"></button>
            <button class="layui-icon layui-carousel-arrow" lay-type="add"></button>
        </div>
    </div>
    <div class="details-info layui-pull-right layui-col-md5 ">
        <div class="show-price">
            <span class="sale-price">租金</span>
            <span class="sale-unit">元/月</span>
            <span class="area">发布时间</span>
        </div>
        <hr>
        <div class="show-house-name">
            <p><span class="field">地址：</span><span class="name">湖南省</span></p>
            <p><span class="field">房源类型：</span><span class="name">复式小洋楼</span></p>
            <p><span class="field">房东：</span><span class="name">某先生</span></p>
            <p><span class="field">联系电话：</span><span class="name">13813813800</span></p>
        </div>
        <hr>
        <div class="house-model">
            <ul>
                <li>
                    <p>1室0厅1卫</p>
                    <span>规模</span>
                </li>
                <li>
                    <p>20平米</p>
                    <span>建筑面积</span>
                </li>
                <li>
                    <p>南北</p>
                    <span>朝向</span>
                </li>
            </ul>
        </div>
        <hr>
        <div class="order-btn-container">
            <input type="hidden" class="HID" value="30">
            <input type="hidden" class="uName" value="wym">
            <button class="order-btn" lay-submit lay-filter="addOrder">现在预定</button>
        </div>
    </div>
    <div class="anchor-title">
        <h3>房屋配置</h3>
    </div>
    <div class="household-appliances">
        <ul>
            <li>
                <i class="iconfont icon-chuang"></i>
                <span>床</span>
            </li>
            <li>
                <i class="iconfont icon-kongtiao"></i>
                <span>空调</span>
            </li>
            <li>
                <i class="iconfont icon-yigui"></i>
                <span>衣柜</span>
            </li>
            <li>
                <i class="iconfont icon-iconyihuifu-"></i>
                <span>桌椅</span>
            </li>
            <li>
                <i class="iconfont icon-xiyiji"></i>
                <span>洗衣机</span>
            </li>
            <li>
                <i class="iconfont icon-shafa"></i>
                <span>沙发</span>
            </li>
            <li>
                <i class="iconfont icon-xiaodugui"></i>
                <span>消毒柜</span>
            </li>
            <li>
                <i class="iconfont icon-weibolu"></i>
                <span>微波炉</span>
            </li>
            <li>
                <i class="iconfont icon-chouyouyanji"></i>
                <span>抽油烟机</span>
            </li>
            <li>
                <i class="iconfont icon-dianshi"></i>
                <span>电视</span>
            </li>
            <li>
                <i class="iconfont icon-meiqitianranqi"></i>
                <span>天然气</span>
            </li>
            <li>
                <i class="iconfont icon-kuandai"></i>
                <span>宽带</span>
            </li>
            <li>
                <i class="iconfont icon-reshuiqianzhuang"></i>
                <span>热水器</span>
            </li>
            <li>
                <i class="iconfont icon-bingxiang"></i>
                <span>冰箱</span>
            </li>
        </ul>
    </div>
</section>
<footer id="footer"></footer>
</body>
<script>
    $(function (){
        $.getScript("../static/js/jquery.min.js");
        $.getScript("../static/layui/layui.all.js");
        $.getScript("../static/bootstrap/js/bootstrap.min.js");
        $("#header").load("../static/head.html");
        $("#footer").load("../static/foot.html");
        if (date != null || date != "undifind"){
            console.log(date);
            $(".house-title").text(date.lname);
            $(".tags span").eq(0).text(date.ldesc);
            $(".layui-breadcrumb a").eq(0).attr("href","index");
            $(".sale-price").text(date.lprice);
            $(".area").text("发布时间:"+date.ltime);
            let address = "<p><span class='field'>地址：</span><span class='name'>"+date.aid+"</span></p>";
            let leixin = "<p><span class='field'>房源类型：</span><span class='name'>"+date.lfea+"</span></p>";
            let lname = "<p><span class='field'>房东：</span><span class='name'>"+date.uname+"</span></p>"
            let lphone = "<p><span class='field'>联系电话：</span><span class='name'>"+date.uid+"</span></p>"
            $(".show-house-name").append(address).append(leixin).append(lname).append(lphone);
            let imgs = JSON.parse(date.limg);
            for (let img in imgs) {
                let backdiv = $("<div>").attr('style',"background: url('"+imgs[img]+"') no-repeat center/cover");
                $(".bbackdiv").append(backdiv);
                $(".layui-carousel-ind ul").append("<li class='layui-this'></li>");
            }
        }else {
            djs();
        }
    });
</script>
</html>